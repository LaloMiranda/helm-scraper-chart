<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helm Charts Repository</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
        h1 {
            color: #007bff;
        }
        p {
            font-size: 18px;
        }
        .chart-info {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>🚀 Helm Charts Repository</h1>
    <p>Este es el repositorio público de Helm Charts.</p>
    
    <div class="chart-info">
        <h2>📦 Última Versión del Chart</h2>
        <p><strong>Nombre:</strong> <span id="chart-name">Cargando...</span></p>
        <p><strong>Versión:</strong> <span id="chart-version">Cargando...</span></p>
        <p><strong>Descripción:</strong> <span id="chart-description">Cargando...</span></p>
        <p><a id="download-link" href="#" target="_blank">🔗 Descargar Chart</a></p>
    </div>

    <script>
        async function loadHelmChart() {
            try {
                const response = await fetch('index.yaml');
                const text = await response.text();
                const yamlData = text.split("\n");
                
                let chartName = "", chartVersion = "", chartDescription = "", downloadUrl = "";
                let insideEntry = false;

                yamlData.forEach(line => {
                    line = line.trim();
                    if (line.startsWith("helm-scraper:")) insideEntry = true;

                    if (insideEntry) {
                        if (line.startsWith("name:")) chartName = line.split(":")[1].trim();
                        if (line.startsWith("version:")) chartVersion = line.split(":")[1].trim();
                        if (line.startsWith("description:")) chartDescription = line.split(":")[1].trim();
                        if (line.startsWith("urls:")) downloadUrl = line.split("-")[1].trim();
                    }
                });

                document.getElementById("chart-name").innerText = chartName;
                document.getElementById("chart-version").innerText = chartVersion;
                document.getElementById("chart-description").innerText = chartDescription || "Sin descripción.";
                document.getElementById("download-link").href = downloadUrl;
            } catch (error) {
                console.error("Error al cargar el index.yaml:", error);
            }
        }

        loadHelmChart();
    </script>
</body>
</html>
